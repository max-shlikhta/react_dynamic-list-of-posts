(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(6),s=n.n(c),a=n(2),i=n(1),o=(n(12),n(13),function(e,t){return fetch("".concat("https://mate.academy/students-api","/").concat(e),t).then((function(e){return e.json()})).then((function(e){if(e.Error)throw new Error("".concat(e.status," - ").concat(e.statusText));return e}))}),r=(n(14),n(0)),l=function(e){var t=e.selectedUserId,n=e.onSelect,c=e.selectedPostId,s=Object(i.useState)([]),l=Object(a.a)(s,2),d=l[0],u=l[1];return Object(i.useEffect)((function(){(function(e){var t;return t=e?"posts?userId=".concat(e):"posts",o(t)})(t).then((function(e){return u(e)}))}),[t]),Object(r.jsxs)("div",{className:"PostsList",children:[Object(r.jsx)("h2",{children:"Posts:"}),d.length?Object(r.jsx)("ul",{className:"PostsList__list",children:d.map((function(e){var t=e.title,s=e.userId,a=e.id;return Object(r.jsxs)("li",{className:"PostsList__item",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"[User #".concat(s,"]: ")}),t]}),Object(r.jsx)("button",{type:"button",className:"PostsList__button button",onClick:a!==c?function(){return n(a)}:function(){return n(0)},children:a!==c?Object(r.jsx)("p",{children:"Open \u25ba"}):Object(r.jsx)("p",{children:"Close \u25c4"})})]},a)}))}):Object(r.jsx)("p",{children:"Not posts yet"})]})},d=n(7),u=n(20),j=(n(16),function(e){var t=e.onAdd,n=e.postId,c=Object(i.useState)({id:"",name:"",email:"",body:""}),s=Object(a.a)(c,2),l=s[0],d=s[1],j=l.id,m=l.name,b=l.email,h=l.body,O=function(e){var t=e.target.value;switch(e.target.name){case"id":d({id:Object(u.a)(),name:m,email:b,body:h});break;case"name":d({id:j,name:t,email:b,body:h});break;case"email":d({id:j,name:m,email:t,body:h});break;case"body":d({id:j,name:m,email:b,body:t})}};return Object(r.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),function(e,t,n,c,s){return o("comments",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({id:e,postId:t,name:n,email:c,body:s})})}(j,n,m,b,h).then((function(e){t(e)})),d({id:"",name:"",email:"",body:""})},children:[Object(r.jsx)("div",{className:"form-field",children:Object(r.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:m,onChange:O,required:!0})}),Object(r.jsx)("div",{className:"form-field",children:Object(r.jsx)("input",{type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:b,onChange:O,required:!0})}),Object(r.jsx)("div",{className:"form-field",children:Object(r.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:h,onChange:O,required:!0})}),Object(r.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),m=(n(17),function(e){var t=e.selectedPostId,n=Object(i.useState)(null),c=Object(a.a)(n,2),s=c[0],l=c[1],u=Object(i.useState)(!0),m=Object(a.a)(u,2),b=m[0],h=m[1],O=Object(i.useState)([]),p=Object(a.a)(O,2),f=p[0],x=p[1],_=function(){var e;(e=t,o("posts/".concat(e))).then((function(e){return l(e)}))},N=function(){var e;(e=t,o("comments?postId=".concat(e))).then((function(e){return x(e)}))};Object(i.useEffect)((function(){Promise.all([_(),N()])}),[t,b]);var v=function(e){(function(e){return o("comments/".concat(e),{method:"DELETE"})})(e).then((function(t){t&&x(f.filter((function(t){return t.id!==e})))}))},y=f.length;return Object(r.jsxs)("div",{className:"PostDetails",children:[Object(r.jsx)("h2",{children:"Post details:"}),Object(r.jsx)("section",{className:"PostDetails__post",children:Object(r.jsx)("p",{children:null===s||void 0===s?void 0:s.body})}),Object(r.jsxs)("section",{className:"PostDetails__comments",children:[y?Object(r.jsx)("button",{type:"button",className:"button",hidden:y<1,onClick:function(){h(!b)},children:"".concat(b?"Hide":"Show","\n                 ").concat(y,"\n                 ").concat(y<2?"comment":"comments")}):Object(r.jsx)("p",{className:"PostDetails__list-item",children:"No comments yet. You can leave a comment first \u25bc"}),b&&Object(r.jsx)("ul",{className:"PostDetails__list",children:f.map((function(e){var t=e.id,n=e.body;return Object(r.jsxs)("li",{className:"PostDetails__list-item",children:[Object(r.jsx)("button",{type:"button",className:"PostDetails__x",onClick:function(){return v(t)},children:Object(r.jsx)("p",{children:"\u274c"})}),Object(r.jsx)("p",{children:n})]},t)}))})]}),Object(r.jsx)("section",{children:Object(r.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(r.jsx)(j,{onAdd:function(e){x([].concat(Object(d.a)(f),[e]))},postId:t})})})]})}),b=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(0),d=Object(a.a)(s,2),u=d[0],j=d[1],b=Object(i.useState)(0),h=Object(a.a)(b,2),O=h[0],p=h[1];Object(i.useEffect)((function(){o("users").then((function(e){return c(e)}))}),[]);var f=Object(i.useCallback)((function(e){p(e)}),[u]);return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("header",{className:"App__header",children:Object(r.jsxs)("label",{children:["Select a user: \xa0",Object(r.jsxs)("select",{className:"App__user-selector",value:String(u),onChange:function(e){j(Number(e.target.value))},children:[Object(r.jsx)("option",{value:"0",children:"all users"},"0"),n.map((function(e){var t=e.id,n=e.name;return Object(r.jsx)("option",{value:t,children:n},t)}))]})]})}),Object(r.jsxs)("main",{className:"App__main",children:[Object(r.jsx)("div",{className:"App__sidebar",children:Object(r.jsx)(l,{selectedUserId:u,onSelect:f,selectedPostId:O})}),Object(r.jsx)("div",{className:"App__content",children:O?Object(r.jsx)(m,{selectedPostId:O}):Object(r.jsx)("p",{children:"No post selected"})})]})]})};s.a.render(Object(r.jsx)(b,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.012c860d.chunk.js.map